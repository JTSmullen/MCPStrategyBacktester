<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Trading Strategy Backtester</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <!--
     * @fileoverview Main HTML document for the Algorithmic Trading Backtester frontend.
     *
     * This file defines the structure and content of the user interface. It includes:
     * - A text area for users to input their trading strategy in natural language.
     * - A button to trigger the backtest process.
     * - Designated sections to display the summary results, detailed performance metrics,
     *   and a chart showing the portfolio's value over time.
     *
     * Dependencies:
     * - `style.css`: For all visual styling and layout.
     * - `Chart.js`: A third-party library loaded via CDN for rendering the portfolio chart.
     * - `app.js`: The custom JavaScript file that handles user interactions, API calls,
     *   and dynamic updates to the DOM.
     *
     * Note: This is a Flask template, so it uses the "url_for()" function to generate URLs
     * for static assets (CSS and JS), ensuring they work correctly regardless of
     * where the application is hosted.
    -->
    <div class="container">
        <h1>Trading Strategy Backtester</h1>
        <textarea id="strategy-input" placeholder="Example: Buy when the 20-day SMA crosses above the 50-day EMA, sell when it crosses below."></textarea>
        <button id="backtest-btn">Run Backtest</button>
        
        <div class="main-results-layout">
            <div class="chart-container">
                <canvas id="portfolioChart"></canvas>
            </div>

            <div class="metrics-and-summary-wrapper">
                <div id="summary-results">
                    <h2>Backtest Results Summary</h2>
                    <!--
                        The initial spans are empty in the final version.
                        The "Waiting for results..." text from the README example has been removed for a cleaner initial state.
                    -->
                    <p>Final Portfolio Value: <span id="final-value"></span></p>
                    <p>PnL: <span id="pnl-value"></span></p>
                </div>

                <div id="performance-metrics">
                    <h2>Performance Metrics</h2>
                    <p>Sharpe Ratio: <span id="sharpe-ratio"></span></p>
                    <p>Total Return: <span id="total-return"></span>%</p>
                    <p>Annual Return: <span id="annual-return"></span>%</p>
                    <p>Max Drawdown: <span id="max-drawdown"></span>%</p>
                    <p>Max Drawdown Duration: <span id="max-drawdown-duration"></span> days</p>
                    <p>Total Trades: <span id="total-trades"></span></p>
                    <p>Winning Trades: <span id="winning-trades"></span></p>
                    <p>Losing Trades: <span id="losing-trades"></span></p>
                    <p>Win Rate: <span id="win-rate"></span>%</p>
                    <p>Average Win: <span id="avg-win"></span></p>
                    <p>Average Loss: <span id="avg-loss"></span></p>
                    <p>Alpha: <span id="alpha"></span>%</p>
                    <p>Beta: <span id="beta"></span></p>
                </div>
            </div>
        </div>
    </div>
    <script src="{{ url_for('static', filename='app.js') }}"></script>
</body>
</html>